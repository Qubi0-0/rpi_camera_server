<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Nic właściwie wartościowego" />
    <link rel="icon" type="images/png" href="images/bin.png" />
    <title>Main site</title>
    <link rel="stylesheet" href="css/style.css" />
  </head>

  <body>
    <header></header>
    <main>
      <div class="pagination">
        <a href="/" class="active">index</a>
        <!-- <a href="about.html">about</a>
        <a href="garbage.html">garbage</a> -->
        <a href="/mlg.html">MLG</a>
      </div>
      <h1>Camera Stream</h1>
      <div class="photo-section">
        <div class="photo-item">
          <p class="photo-title">frame with 0.5ms of exposure</p>
          <img
            class="camera-stream"
            id="frame-500"
            src="/frames/frame_500-µs.jpg"
            alt="Camera stream"
          />
        </div>
        <div class="photo-item">
          <p class="photo-title">frame with 1ms of exposure</p>
          <img
            class="camera-stream"
            id="frame-1000"
            src="/frames/frame_1000-µs.jpg"
            alt="Camera stream"
          />
        </div>
        <div class="photo-item">
          <p class="photo-title">frame with 5ms of exposure</p>
          <img
            class="camera-stream"
            id="frame-5000"
            src="/frames/frame_5000-µs.jpg"
            alt="Camera stream"
          />
        </div>
        <div class="photo-item">
          <p class="photo-title">frame with 10ms of exposure</p>
          <img
            class="camera-stream"
            id="frame-10000"
            src="/frames/frame_10000-µs.jpg"
            alt="Camera stream"
          />
        </div>
        <div class="photo-item">
          <p class="photo-title">frame with 20ms of exposure</p>
          <img
            class="camera-stream"
            id="frame-20000"
            src="/frames/frame_20000-µs.jpg"
            alt="Camera stream"
          />
        </div>
        <!-- <div class="photo-item">
          <p class="photo-title">frame with 50ms of exposure</p>
          <img
            class="camera-stream"
            id="frame-50000"
            src="/frames/frame_50000-µs.jpg"
            alt="Camera stream"
          />
        </div> -->
        <div class="photo-item">
          <p class="photo-title">frame with 100ms of exposure</p>
          <img
            class="camera-stream"
            id="frame-100000"
            src="/frames/frame_100000-µs.jpg"
            alt="Camera stream"
          />
        </div>
        <div class="photo-item">
          <p class="photo-title">frame with 200ms of exposure</p>
          <img
            class="camera-stream"
            id="frame-200000"
            src="/frames/frame_200000-µs.jpg"
            alt="Camera stream"
          />
        </div>
        <div class="photo-item">
          <p class="photo-title">frame with 0.5s of exposure</p>
          <img
            class="camera-stream"
            id="frame-500000"
            src="/frames/frame_500000-µs.jpg"
            alt="Camera stream"
          />
        </div>
        <div class="photo-item">
          <p class="photo-title">frame with 1s of exposure</p>
          <img
            class="camera-stream"
            id="frame-1000000"
            src="/frames/frame_1000000-µs.jpg"
            alt="Camera stream"
          />
        </div>
      </div>
    </main>
    <footer></footer>
    <script>
      // Function to update the image sources with a cache-busting query parameter
      function updateImages() {
        const images = document.querySelectorAll(".camera-stream");
        images.forEach((img) => {
          const src = img.src.split("?")[0];
          img.src = `${src}?timestamp=${new Date().getTime()}`;
        });
      }

      // Function to synchronize updates with the start of each new minute plus 10 seconds
      function synchronizeUpdates() {
        const now = new Date();
        const secondsUntilNextMinute = 60 - now.getSeconds();
        const millisecondsUntilNextMinute = secondsUntilNextMinute * 1000;
        const delay = millisecondsUntilNextMinute + 10000; // 10 seconds after the next minute

        setTimeout(() => {
          updateImages();
          setInterval(updateImages, 5 * 60000); // Update images every 60 seconds
        }, delay);
      }

      // Start synchronization
      synchronizeUpdates();
    </script>
  </body>
</html>
